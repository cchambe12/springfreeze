scale_color_manual(labels = c("CS0","Leafout", "Budburst", "WL1"), values = c("purple2", "darkolivegreen4", "forestgreen", "royalblue4")) +
xlab("Species") +coord_flip()
plot(chill)
chill<-ggplot(dx, aes(x = code, y=bday, ymin = bday, ymax = lday, group=row.names(dx) )) +
geom_point(aes(y=bday, col="forestgreen"), position = position_dodge(.5)) + geom_point(aes(y=lday, col="darkgreen"), position = position_dodge(.5)) +
geom_linerange(aes(x = code,ymin = bday, ymax = lday, col=treatcode), position=position_dodge(.5)) +  ylab("Day of Year") +
scale_color_manual(labels = c("CS0","Leafout", "Budburst", "WL1"), values = c("purple2", "darkolivegreen", "forestgreen", "royalblue4")) +
xlab("Species") +coord_flip()
plot(chill)
chill<-ggplot(dx, aes(x = code, y=bday, ymin = bday, ymax = lday, group=row.names(dx) )) +
geom_point(aes(y=bday, col="forestgreen"), position = position_dodge(.5)) + geom_point(aes(y=lday, col="darkgreen"), position = position_dodge(.5)) +
geom_linerange(aes(x = code,ymin = bday, ymax = lday, col=treatcode), position=position_dodge(.5)) +  ylab("Day of Year") +
scale_color_manual(labels = c("CS0","Leafout", "Budburst", "WL1"), values = c("purple2", "darkolivegreen1", "forestgreen", "royalblue4")) +
xlab("Species") +coord_flip()
plot(chill)
chill<-ggplot(dx, aes(x = code, y=bday, ymin = bday, ymax = lday, group=row.names(dx) )) +
geom_point(aes(y=bday, col="forestgreen"), position = position_dodge(.5)) + geom_point(aes(y=lday, col="darkgreen"), position = position_dodge(.5)) +
geom_linerange(aes(x = code,ymin = bday, ymax = lday, col=treatcode), position=position_dodge(.5)) +  ylab("Day of Year") +
scale_color_manual(labels = c("CS0","Leafout", "Budburst", "WL1"), values = c("purple2", "darkolivegreen3", "forestgreen", "royalblue4")) +
xlab("Species") +coord_flip()
plot(chill)
chill<-ggplot(dx, aes(x = code, y=bday, ymin = bday, ymax = lday, group=row.names(dx) )) +
geom_point(aes(y=bday, col="forestgreen"), position = position_dodge(.5)) + geom_point(aes(y=lday, col="darkgreen"), position = position_dodge(.5)) +
geom_linerange(aes(x = code,ymin = bday, ymax = lday, col=treatcode), position=position_dodge(.5)) +  ylab("Day of Year") +
scale_color_manual(labels = c("CS0","Leafout", "Budburst", "WL1"), values = c("purple2", "darkolivegreen4", "forestgreen", "royalblue4")) +
xlab("Species") +coord_flip()
plot(chill)
chill<-ggplot(dx, aes(x = code, y=bday, ymin = bday, ymax = lday, group=row.names(dx) )) +
geom_point(aes(y=bday, col="forestgreen"), position = position_dodge(.5)) + geom_point(aes(y=lday, col="darkgreen"), position = position_dodge(.5)) +
geom_linerange(aes(x = code,ymin = bday, ymax = lday, col=treatcode), position=position_dodge(.5)) +  ylab("Day of Year") +
scale_color_manual(labels = c("CS0","Leafout", "Budburst", "WL1"), values = c("purple2", "darkolivegreen4", "darkgreen", "royalblue4")) +
xlab("Species") +coord_flip()
plot(chill)
chill<-ggplot(dx, aes(x = code, y=bday, ymin = bday, ymax = lday, group=row.names(dx) )) +
geom_point(aes(y=bday, col="forestgreen"), position = position_dodge(.5)) + geom_point(aes(y=lday, col="darkgreen"), position = position_dodge(.5)) +
geom_linerange(aes(x = code,ymin = bday, ymax = lday, col=treatcode), position=position_dodge(.5)) +  ylab("Day of Year") +
scale_color_manual(labels = c("CS0","Leafout", "Budburst", "WL1"), values = c("purple2", "darkolivegreen4", "green4", "royalblue4")) +
xlab("Species") +coord_flip()
plot(chill)
chill<-ggplot(dx, aes(x = code, y=bday, ymin = bday, ymax = lday, group=row.names(dx) )) +
geom_point(aes(y=bday, col="forestgreen"), position = position_dodge(.5)) + geom_point(aes(y=lday, col="darkgreen"), position = position_dodge(.5)) +
geom_linerange(aes(x = code,ymin = bday, ymax = lday, col=treatcode), position=position_dodge(.5)) +  ylab("Day of Year") +
scale_color_manual(labels = c("CS0","Leafout", "Budburst", "WL1"), values = c("purple2", "darkgreen", "darkgreen4", "royalblue4")) +
xlab("Species") +coord_flip()
plot(chill)
chill<-ggplot(dx, aes(x = code, y=bday, ymin = bday, ymax = lday, group=row.names(dx) )) +
geom_point(aes(y=bday, col="forestgreen"), position = position_dodge(.5)) + geom_point(aes(y=lday, col="darkgreen"), position = position_dodge(.5)) +
geom_linerange(aes(x = code,ymin = bday, ymax = lday, col=treatcode), position=position_dodge(.5)) +  ylab("Day of Year") +
scale_color_manual(labels = c("CS0","Leafout", "Budburst", "WL1"), values = c("purple2", "darkgreen", "darkolivegreen4", "royalblue4")) +
xlab("Species") +coord_flip()
plot(chill)
chill<-ggplot(dx, aes(x = code, y=bday, ymin = bday, ymax = lday, group=row.names(dx) )) +
geom_point(aes(y=bday, col="forestgreen"), position = position_dodge(.5)) + geom_point(aes(y=lday, col="darkgreen"), position = position_dodge(.5)) +
geom_linerange(aes(x = code,ymin = bday, ymax = lday, col=treatcode), position=position_dodge(.5)) +  ylab("Day of Year") +
scale_color_manual(labels = c("CS0","Leafout", "Budburst", "WL1"), values = c("purple2", "darkgreen", "darkolivegreen3", "royalblue4")) +
xlab("Species") +coord_flip()
plot(chill)
chill<-ggplot(dx, aes(x = code,ymin = bday, ymax = lday, group=row.names(dx) )) +
geom_point(aes(y=bday, col="forestgreen"), position = position_dodge(.5)) + geom_point(aes(y=lday, col="darkgreen"), position = position_dodge(.5)) +
geom_linerange(aes(x = code,ymin = bday, ymax = lday, col=treatcode), position=position_dodge(.5)) +  ylab("Day of Year") +
scale_color_manual(labels = c("CS0","Leafout", "Budburst", "WL1"), values = c("purple2", "darkgreen", "darkolivegreen3", "royalblue4")) +
xlab("Species") +coord_flip()
plot(chill)
rm(list=ls()) # remove everything currently held in the R memory
options(stringsAsFactors=FALSE)
graphics.off()
# Load libraries
library(dplyr)
library(tidyr)
library(ggplot2)
library(arm)
library(data.table)
library(car)
library(xtable)
# Set Working Directory
setwd("~/Documents/git/springfreeze")
d<-read.csv("input/Budburst.clean.csv",header=TRUE)
########### NEW EDITION - CAT 17 APRIL 2017 ####################
tx<-c("CS0", "WL1")
dx<- d %>%
dplyr::select(ind, treatcode, lday, bday, site) %>%
filter(treatcode %in% tx)
dx<-na.omit(dx)
dx$species<-substr(dx$ind, 1, 6)
dx<-dx%>%filter(species!="VIBCAS")%>%filter(species!="VIBLAN") # all entries for two species have the same budburst and leafout day, removed because probably from error
small.spp<-dx %>% dplyr::select(species, treatcode) %>% filter(treatcode=="WL1")
spp<-unique(small.spp$species)
dx<-dx%>% filter(species %in% spp)
dx<-dx%>%dplyr::select(-site, -ind)
dx$mean<-ave(dx$bday, dx$species, dx$treatcode)
dx<-dx%>%
group_by(mean, species)%>%
arrange(species)%>%
filter(row_number()==1)
dx<-dx%>%group_by(species, treatcode) %>% arrange(species, desc(treatcode))
dx$code<-reorder(dx$species, dx$bday)
chill<-ggplot(dx, aes(x = code, ymin = bday, ymax = lday, group=row.names(dx) )) +
geom_point(aes(y=bday, col="forestgreen"), position = position_dodge(.5)) + geom_point(aes(y=lday, col="darkgreen"), position = position_dodge(.5)) +
geom_linerange(aes(x = code,ymin = bday, ymax = lday, col=treatcode), position=position_dodge(.5)) +  ylab("Day of Year") +
scale_color_manual(labels = c("CS0","Leafout", "Budburst", "WL1"), values = c("purple2", "blue2", "green2", "coral1")) +
xlab("Species") +coord_flip()
plot(chill)
setwd("~/Documents/git/springfreeze")
d<-read.csv("input/Budburst.clean.csv",header=TRUE)
tx<-c("CS0", "WL1")
dx<- d %>%
dplyr::select(ind, treatcode, lday, bday, site) %>%
filter(treatcode %in% tx)
View(dx)
dx<-na.omit(dx)
dx$species<-substr(dx$ind, 1, 6)
dx<-dx%>%filter(species!="VIBCAS")%>%filter(species!="VIBLAN") # all entries for two species have the same budburst and leafout day, removed because probably from error
small.spp<-dx %>% dplyr::select(species, treatcode) %>% filter(treatcode=="WL1")
spp<-unique(small.spp$species)
dx<-dx%>% filter(species %in% spp)
dx<-dx%>%dplyr::select(-site, -ind)
dx$mean<-ave(dx$bday, dx$species, dx$treatcode)
dx<-dx%>%
group_by(mean, species)%>%
arrange(species)%>%
filter(row_number()==1)
dx<-dx%>%group_by(species, treatcode) %>% arrange(species, desc(treatcode))
dx$code<-reorder(dx$species, dx$bday)
chill<-ggplot(dx, aes(x = code, ymin = bday, ymax = lday )) +
geom_point(aes(y=bday, col="forestgreen"), position = position_dodge(.5)) + geom_point(aes(y=lday, col="darkgreen"), position = position_dodge(.5)) +
geom_linerange(aes(x = code,ymin = bday, ymax = lday, col=treatcode), position=position_dodge(.5)) +  ylab("Day of Year") +
scale_color_manual(labels = c("CS0","Leafout", "Budburst", "WL1"), values = c("purple2", "blue2", "green2", "coral1")) +
xlab("Species") +coord_flip()
plot(chill)
chill<-ggplot(dx, aes(x = code, ymin = bday, ymax = lday, group=code )) +
geom_point(aes(y=bday, col="forestgreen"), position = position_dodge(.5)) + geom_point(aes(y=lday, col="darkgreen"), position = position_dodge(.5)) +
geom_linerange(aes(x = code,ymin = bday, ymax = lday, col=treatcode), position=position_dodge(.5)) +  ylab("Day of Year") +
scale_color_manual(labels = c("CS0","Leafout", "Budburst", "WL1"), values = c("purple2", "blue2", "green2", "coral1")) +
xlab("Species") +coord_flip()
plot(chill)
chill<-ggplot(dx, aes(x = code, ymin = bday, ymax = lday, group=interaction(species, treatcode) )) +
geom_point(aes(y=bday, col="forestgreen"), position = position_dodge(.5)) + geom_point(aes(y=lday, col="darkgreen"), position = position_dodge(.5)) +
geom_linerange(aes(x = code,ymin = bday, ymax = lday, col=treatcode), position=position_dodge(.5)) +  ylab("Day of Year") +
scale_color_manual(labels = c("CS0","Leafout", "Budburst", "WL1"), values = c("purple2", "blue2", "green2", "coral1")) +
xlab("Species") +coord_flip()
plot(chill)
chill<-ggplot(dx, aes(x = code,ymin = bday, ymax = lday, group=interaction(species, treatcode) )) +
geom_point(aes(y=bday, col="forestgreen"), position = position_dodge(.5)) + geom_point(aes(y=lday, col="darkgreen"), position = position_dodge(.5)) +
geom_linerange(aes(x = code,ymin = bday, ymax = lday, col=treatcode), position=position_dodge(.5)) +  ylab("Day of Year") +
scale_color_manual(labels = c("CS0","Leafout", "Budburst", "WL1"), values = c("purple2", "darkgreen", "darkolivegreen3", "royalblue4")) +
xlab("Species") +coord_flip()
plot(chill)
chill<-ggplot(dx, aes(x = code,ymin = bday, ymax = lday, group=interaction(species, treatcode) )) +
geom_point(aes(y=bday, col="forestgreen"), position = position_dodge(.5)) + geom_point(aes(y=lday, col="darkgreen"), position = position_dodge(.5)) +
geom_linerange(aes(x = code,ymin = bday, ymax = lday, col=treatcode), position=position_dodge(.5)) +  ylab("Day of Year") +
scale_color_manual(labels = c("CS0","Leafout", "Budburst", "WL1"), values = c("purple3", "darkgreen", "darkolivegreen3", "royalblue4")) +
xlab("Species") +coord_flip()
plot(chill)
chill<-ggplot(dx, aes(x = code,ymin = bday, ymax = lday, group=interaction(species, treatcode) )) +
geom_point(aes(y=bday, col="forestgreen"), position = position_dodge(.5)) + geom_point(aes(y=lday, col="darkgreen"), position = position_dodge(.5)) +
geom_linerange(aes(x = code,ymin = bday, ymax = lday, col=treatcode), position=position_dodge(.5)) +  ylab("Day of Year") +
scale_color_manual(labels = c("CS0","Leafout", "Budburst", "WL1"), values = c("purple3", "darkgreen", "darkolivegreen3", "royalblue3")) +
xlab("Species") +coord_flip()
plot(chill)
chill<-ggplot(dx, aes(x = code,ymin = bday, ymax = lday, group=interaction(species, treatcode) )) +
geom_point(aes(y=bday, col="forestgreen"), position = position_dodge(.5)) + geom_point(aes(y=lday, col="darkgreen"), position = position_dodge(.5)) +
geom_linerange(aes(x = code,ymin = bday, ymax = lday, col=treatcode), position=position_dodge(.5)) +  ylab("Day of Year") +
scale_color_manual(labels = c("CS0","Leafout", "Budburst", "WL1"), values = c("purple3", "green4", "darkolivegreen3", "royalblue3")) +
xlab("Species") +coord_flip()
plot(chill)
dxx<-dx
dxx$chilling<- as.numeric(as.character(substr(dxx$chill, 6, 6)))
dxx<-d
dxx$chilling<- as.numeric(as.character(substr(dxx$chill, 6, 6)))
dxx$warm<-as.numeric(as.character(dxx$warm))
dxx$photo<-as.numeric(as.character(dxx$photo))
dxx$species<-substr(dxx$ind, 1, 6)
small.spp<-dxx %>% dplyr::select(species, treatcode) %>% filter(treatcode=="WL1")
spp<-unique(small.spp$species)
dxx<-dxx%>% filter(species %in% spp)
dxx<-dxx %>%
dplyr::select(id, species, site, lday, bday, chilling, warm, photo, treatcode)
dxx$risk<-dxx$lday-dxx$bday
Anova(lm(risk~chilling + warm + photo, data=dxx))
myspp <- unique(dxx$species)
mylist<-list()
for(i in c(1:length(myspp))) {
subby<-subset(dxx, sp==myspp[i])
myanova<-Anova(lm(risk~chilling + warm + photo, data=subby))
print(myanova)
mylist[[myspp[i]]] <- myanova
}
myspp
mylist<-list()
for(i in c(1:length(myspp))) {
subby<-subset(dxx, species==myspp[i])
myanova<-Anova(lm(risk~chilling + warm + photo, data=subby))
print(myanova)
mylist[[myspp[i]]] <- myanova
}
rm(list=ls()) # remove everything currently held in the R memory
options(stringsAsFactors=FALSE)
graphics.off()
# Load libraries
library(dplyr)
library(tidyr)
library(ggplot2)
library(arm)
library(data.table)
library(car)
library(xtable)
# Set Working Directory
setwd("~/Documents/git/springfreeze")
d<-read.csv("input/Budburst.clean.csv",header=TRUE)
########### NEW EDITION - CAT 26 May 2017 ####################
tx<-c("CS0", "WL1")
dx<- d %>%
dplyr::select(ind, treatcode, lday, bday, site) %>%
filter(treatcode %in% tx)
dx<-na.omit(dx)
dx$species<-substr(dx$ind, 1, 6)
dx<-dx%>%filter(species!="VIBCAS")%>%filter(species!="VIBLAN") # all entries for two species have the same budburst and leafout day, removed because probably from error
small.spp<-dx %>% dplyr::select(species, treatcode) %>% filter(treatcode=="WL1")
spp<-unique(small.spp$species)
dx<-dx%>% filter(species %in% spp)
dx<-dx%>%dplyr::select(-site, -ind)
dx$mean<-ave(dx$bday, dx$species, dx$treatcode)
dx<-dx%>%
group_by(mean, species)%>%
arrange(species)%>%
filter(row_number()==1)
dx<-dx%>%group_by(species, treatcode) %>% arrange(species, desc(treatcode))
dx$code<-reorder(dx$species, dx$bday)
chill<-ggplot(dx, aes(x = code,ymin = bday, ymax = lday, group=interaction(species, treatcode) )) +
geom_point(aes(y=bday, col="forestgreen"), position = position_dodge(.5)) + geom_point(aes(y=lday, col="darkgreen"), position = position_dodge(.5)) +
geom_linerange(aes(x = code,ymin = bday, ymax = lday, col=treatcode), position=position_dodge(.5)) +  ylab("Day of Year") +
scale_color_manual(labels = c("CS0","Leafout", "Budburst", "WL1"), values = c("purple3", "green4", "darkolivegreen3", "royalblue3")) +
xlab("Species") +coord_flip()
plot(chill)
write.csv(mylist, "anovatable.csv", row.names=FALSE)
rm(list=ls()) # remove everything currently held in the R memory
options(stringsAsFactors=FALSE)
graphics.off()
# Load libraries
library(dplyr)
library(tidyr)
library(ggplot2)
library(arm)
library(data.table)
library(car)
library(xtable)
# Set Working Directory
setwd("~/Documents/git/springfreeze")
d<-read.csv("input/Budburst.clean.csv",header=TRUE)
########### NEW EDITION - CAT 26 May 2017 ####################
tx<-c("CS0", "WL1")
dx<- d %>%
dplyr::select(ind, treatcode, lday, bday, site) %>%
filter(treatcode %in% tx)
dx<-na.omit(dx)
dx$species<-substr(dx$ind, 1, 6)
dx<-dx%>%filter(species!="VIBCAS")%>%filter(species!="VIBLAN") # all entries for two species have the same budburst and leafout day, removed because probably from error
small.spp<-dx %>% dplyr::select(species, treatcode) %>% filter(treatcode=="WL1")
spp<-unique(small.spp$species)
dx<-dx%>% filter(species %in% spp)
dx<-dx%>%dplyr::select(-site, -ind)
dx$mean<-ave(dx$bday, dx$species, dx$treatcode)
dx<-dx%>%
group_by(mean, species)%>%
arrange(species)%>%
filter(row_number()==1)
dx<-dx%>%group_by(species, treatcode) %>% arrange(species, desc(treatcode))
dx$code<-reorder(dx$species, dx$bday)
chill<-ggplot(dx, aes(x = code,ymin = bday, ymax = lday, group=interaction(species, treatcode) )) +
geom_point(aes(y=bday, col="forestgreen"), position = position_dodge(.5)) + geom_point(aes(y=lday, col="darkgreen"), position = position_dodge(.5)) +
geom_linerange(aes(x = code,ymin = bday, ymax = lday, col=treatcode), position=position_dodge(.5)) +  ylab("Day of Year") +
scale_color_manual(labels = c("CS0","Leafout", "Budburst", "WL1"), values = c("purple3", "green4", "darkolivegreen3", "royalblue3")) +
xlab("Species") +coord_flip()
plot(chill)
### Prep data for Anovas
dxx<-d
dxx$chilling<- as.numeric(as.character(substr(dxx$chill, 6, 6)))
#d$chilling<-as.numeric(as.character(
#ifelse((d$chilling==0), 0, ifelse((d$chilling==1), 4, 1.5))))
dxx$warm<-as.numeric(as.character(dxx$warm))
dxx$photo<-as.numeric(as.character(dxx$photo))
dxx$species<-substr(dxx$ind, 1, 6)
small.spp<-dxx %>% dplyr::select(species, treatcode) %>% filter(treatcode=="WL1")
spp<-unique(small.spp$species)
dxx<-dxx%>% filter(species %in% spp)
dxx<-dxx %>%
dplyr::select(id, species, site, lday, bday, chilling, warm, photo, treatcode)
dxx$risk<-dxx$lday-dxx$bday
Anova(lm(risk~chilling + warm + photo, data=dxx))
# Run anovas for each species
myspp <- unique(dxx$species)
mylist<-list()
for(i in c(1:length(myspp))) {
subby<-subset(dxx, species==myspp[i])
myanova<-Anova(lm(risk~chilling + warm + photo, data=subby))
print(myanova)
mylist[[myspp[i]]] <- myanova
}
write.csv(mylist, "anovatable.csv", row.names=FALSE)
write.csv(mylist, "anovatable.csv", row.names=FALSE)
dxx<-d
dxx$chilling<- as.numeric(as.character(substr(dxx$chill, 6, 6)))
#d$chilling<-as.numeric(as.character(
#ifelse((d$chilling==0), 0, ifelse((d$chilling==1), 4, 1.5))))
dxx$warm<-as.numeric(as.character(dxx$warm))
dxx$photo<-as.numeric(as.character(dxx$photo))
dxx$species<-substr(dxx$ind, 1, 6)
dx<-dx%>%filter(species!="VIBCAS")%>%filter(species!="VIBLAN") # all entries for two species have the same budburst and leafout day, removed because probably from error
small.spp<-dxx %>% dplyr::select(species, treatcode) %>% filter(treatcode=="WL1")
spp<-unique(small.spp$species)
dxx<-dxx%>% filter(species %in% spp)
dxx<-dxx %>%
dplyr::select(id, species, site, lday, bday, chilling, warm, photo, treatcode)
dxx$risk<-dxx$lday-dxx$bday
Anova(lm(risk~chilling + warm + photo, data=dxx))
# Run anovas for each species
myspp <- unique(dxx$species)
mylist<-list()
for(i in c(1:length(myspp))) {
subby<-subset(dxx, species==myspp[i])
myanova<-Anova(lm(risk~chilling + warm + photo, data=subby))
print(myanova)
mylist[[myspp[i]]] <- myanova
}
write.csv(mylist, "anovatable.csv", row.names=FALSE)
dxx<-d
dxx$chilling<- as.numeric(as.character(substr(dxx$chill, 6, 6)))
dxx$warm<-as.numeric(as.character(dxx$warm))
dxx$photo<-as.numeric(as.character(dxx$photo))
dxx$species<-substr(dxx$ind, 1, 6)
dxx<-dxx%>%filter(species!="VIBCAS")%>%filter(species!="VIBLAN") # all entries for two species have the same budburst and leafout day, removed because probably from error
small.spp<-dxx %>% dplyr::select(species, treatcode) %>% filter(treatcode=="WL1")
spp<-unique(small.spp$species)
dxx<-dxx%>% filter(species %in% spp)
dxx<-dxx %>%
dplyr::select(id, species, site, lday, bday, chilling, warm, photo, treatcode)
dxx$risk<-dxx$lday-dxx$bday
Anova(lm(risk~chilling + warm + photo, data=dxx))
myspp <- unique(dxx$species)
mylist<-list()
for(i in c(1:length(myspp))) {
subby<-subset(dxx, species==myspp[i])
myanova<-Anova(lm(risk~chilling + warm + photo, data=subby))
print(myanova)
mylist[[myspp[i]]] <- myanova
}
write.csv(mylist, "anovatable.csv", row.names=FALSE)
rm(list=ls()) # remove everything currently held in the R memory
options(stringsAsFactors=FALSE)
graphics.off()
# Load libraries
library(dplyr)
library(tidyr)
# Set Working Directory
setwd("~/Documents/git/springfreeze")
d<-read.csv("output/anovatable.csv",header=TRUE, colClasses="numeric")
d.acepen <- d[,1:4]
d.acerub<- d[,5:8]
d.acesac <- d[,9:12]
d.betall <- d[,21:24]
d.betpap <- d[,29:32]
d.faggra <- d[,37:40]
d.ilemuc <- d[,49:52]
d.popgra <- d[,69:72]
d.querub <- d[,81:84]
rm(list=ls()) # remove everything currently held in the R memory
options(stringsAsFactors=FALSE)
graphics.off()
# Load libraries
library(dplyr)
library(tidyr)
library(ggplot2)
library(arm)
library(data.table)
library(car)
library(xtable)
# Set Working Directory
setwd("~/Documents/git/springfreeze")
d<-read.csv("input/Budburst.clean.csv",header=TRUE)
########### NEW EDITION - CAT 26 May 2017 ####################
tx<-c("CS0", "WL1")
dx<- d %>%
dplyr::select(ind, treatcode, lday, bday, site) %>%
filter(treatcode %in% tx)
dx<-na.omit(dx)
dx$species<-substr(dx$ind, 1, 6)
dx<-dx%>%filter(species!="VIBCAS")%>%filter(species!="VIBLAN") # all entries for two species have the same budburst and leafout day, removed because probably from error
small.spp<-dx %>% dplyr::select(species, treatcode) %>% filter(treatcode=="WL1")
spp<-unique(small.spp$species)
dx<-dx%>% filter(species %in% spp)
dx<-dx%>%dplyr::select(-site, -ind)
dx$mean<-ave(dx$bday, dx$species, dx$treatcode)
dx<-dx%>%
group_by(mean, species)%>%
arrange(species)%>%
filter(row_number()==1)
dx<-dx%>%group_by(species, treatcode) %>% arrange(species, desc(treatcode))
dx$code<-reorder(dx$species, dx$bday)
chill<-ggplot(dx, aes(x = code,ymin = bday, ymax = lday, group=interaction(species, treatcode) )) +
geom_point(aes(y=bday, col="forestgreen"), position = position_dodge(.5)) + geom_point(aes(y=lday, col="darkgreen"), position = position_dodge(.5)) +
geom_linerange(aes(x = code,ymin = bday, ymax = lday, col=treatcode), position=position_dodge(.5)) +  ylab("Day of Year") +
scale_color_manual(labels = c("CS0","Leafout", "Budburst", "WL1"), values = c("purple3", "green4", "darkolivegreen3", "royalblue3")) +
xlab("Species") +coord_flip()
plot(chill)
### Prep data for Anovas
dxx<-d
dxx$chilling<- as.numeric(as.character(substr(dxx$chill, 6, 6)))
#d$chilling<-as.numeric(as.character(
#ifelse((d$chilling==0), 0, ifelse((d$chilling==1), 4, 1.5))))
dxx$warm<-as.numeric(as.character(dxx$warm))
dxx$photo<-as.numeric(as.character(dxx$photo))
dxx$species<-substr(dxx$ind, 1, 6)
dxx<-dxx%>%filter(species!="VIBCAS")%>%filter(species!="VIBLAN") # all entries for two species have the same budburst and leafout day, removed because probably from error
small.spp<-dxx %>% dplyr::select(species, treatcode) %>% filter(treatcode=="WL1")
spp<-unique(small.spp$species)
dxx<-dxx%>% filter(species %in% spp)
dxx<-dxx %>%
dplyr::select(id, species, site, lday, bday, chilling, warm, photo, treatcode)
dxx$risk<-dxx$lday-dxx$bday
Anova(lm(risk~chilling + warm + photo, data=dxx))
# Run anovas for each species
myspp <- unique(dxx$species)
mylist<-list()
for(i in c(1:length(myspp))) {
subby<-subset(dxx, species==myspp[i])
myanova<-Anova(lm(risk~chilling + warm + photo, data=subby))
print(myanova)
mylist[[myspp[i]]] <- myanova
}
summary(mylist)
mylist<-tidy(mylist)
library(broom)
mylist<-tidy(mylist)
rm(list=ls()) # remove everything currently held in the R memory
options(stringsAsFactors=FALSE)
graphics.off()
# Load libraries
library(dplyr)
library(tidyr)
library(ggplot2)
library(arm)
library(data.table)
library(car)
library(xtable)
library(broom)
# Set Working Directory
setwd("~/Documents/git/springfreeze")
d<-read.csv("input/Budburst.clean.csv",header=TRUE)
########### NEW EDITION - CAT 26 May 2017 ####################
tx<-c("CS0", "WL1")
dx<- d %>%
dplyr::select(ind, treatcode, lday, bday, site) %>%
filter(treatcode %in% tx)
dx<-na.omit(dx)
dx$species<-substr(dx$ind, 1, 6)
dx<-dx%>%filter(species!="VIBCAS")%>%filter(species!="VIBLAN") # all entries for two species have the same budburst and leafout day, removed because probably from error
small.spp<-dx %>% dplyr::select(species, treatcode) %>% filter(treatcode=="WL1")
spp<-unique(small.spp$species)
dx<-dx%>% filter(species %in% spp)
dx<-dx%>%dplyr::select(-site, -ind)
dx$mean<-ave(dx$bday, dx$species, dx$treatcode)
dx<-dx%>%
group_by(mean, species)%>%
arrange(species)%>%
filter(row_number()==1)
dx<-dx%>%group_by(species, treatcode) %>% arrange(species, desc(treatcode))
dx$code<-reorder(dx$species, dx$bday)
chill<-ggplot(dx, aes(x = code,ymin = bday, ymax = lday, group=interaction(species, treatcode) )) +
geom_point(aes(y=bday, col="forestgreen"), position = position_dodge(.5)) + geom_point(aes(y=lday, col="darkgreen"), position = position_dodge(.5)) +
geom_linerange(aes(x = code,ymin = bday, ymax = lday, col=treatcode), position=position_dodge(.5)) +  ylab("Day of Year") +
scale_color_manual(labels = c("CS0","Leafout", "Budburst", "WL1"), values = c("purple3", "green4", "darkolivegreen3", "royalblue3")) +
xlab("Species") +coord_flip()
plot(chill)
### Prep data for Anovas
dxx<-d
dxx$chilling<- as.numeric(as.character(substr(dxx$chill, 6, 6)))
#d$chilling<-as.numeric(as.character(
#ifelse((d$chilling==0), 0, ifelse((d$chilling==1), 4, 1.5))))
dxx$warm<-as.numeric(as.character(dxx$warm))
dxx$photo<-as.numeric(as.character(dxx$photo))
dxx$species<-substr(dxx$ind, 1, 6)
dxx<-dxx%>%filter(species!="VIBCAS")%>%filter(species!="VIBLAN") # all entries for two species have the same budburst and leafout day, removed because probably from error
small.spp<-dxx %>% dplyr::select(species, treatcode) %>% filter(treatcode=="WL1")
spp<-unique(small.spp$species)
dxx<-dxx%>% filter(species %in% spp)
dxx<-dxx %>%
dplyr::select(id, species, site, lday, bday, chilling, warm, photo, treatcode)
dxx$risk<-dxx$lday-dxx$bday
Anova(lm(risk~chilling + warm + photo, data=dxx))
# Run anovas for each species
myspp <- unique(dxx$species)
mylist<-list()
for(i in c(1:length(myspp))) {
subby<-subset(dxx, species==myspp[i])
myanova<-Anova(lm(risk~chilling + warm + photo, data=subby))
print(myanova)
mylist[[myspp[i]]] <- myanova
}
mylist<-tidy(mylist)
as.data.frame(mylist[[1]])
table<-as.data.frame(mylist)
View(table)
novas<-tidy(table)
View(novas)
novas<-as.data.frame(mylist, row.names = make.unique(rownames(mylist)))
novas<-as.data.frame(mylist, row.names = make.unique(rownames(mylist)))
novas<-write.table(mylist)
novas<-write.table(mylist, file="novas.csv", col.names=NA)
novas<-write.table(mylist, file="novas.csv", row.names=NA)
novas<-write.table(mylist, file="novas.csv", row.names=FALSE)
lmOut(mylist, file=“my-results.csv”)
lmOut(mylist, file="myresults.csv")
